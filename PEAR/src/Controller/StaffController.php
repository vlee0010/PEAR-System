<?php
namespace App\Controller;

use App\Model\Entity\Role;

class StaffController extends AppController
{
    public function initialize()
    {
        parent::initialize(); // TODO: Change the autogenerated stub
        $this->loadModel('Units');
        $this->loadModel('PeerReviews');
        $this->loadModel('Questions');
        $this->loadModel('Teams');
        $this->loadModel('Responses');
        $this->loadModel('Users');

        $this->viewBuilder()->setLayout('staff');
    }

    public function isAuthorized($user)
    {
        // If you are a user, you can access this dashboard.
        return Role::isStaff($user['role']);
    }

    public function index()
    {
        $teamQuery = $this->Teams->find();
        $teamName = $teamQuery->select([
            'name' => 'Teams.name',
        ]);

        $this->set(compact('teamName'));
    }
}
